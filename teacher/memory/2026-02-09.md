# Memoria - 2026-02-09

## Decisioni chiave

- Lingua unica da `config.yaml` (`language`) per chat, documenti e commit.
- Stile messaggi commit: italiano in forma passata descrittiva (`Aggiunto...`, `Aggiornati...`, `Spostati...`), non imperativo.
- Corso separato in:
  - `teacher/course/course-plan.md` (piano didattico)
  - `teacher/course/course-progress.md` (progresso studente)
- Entrypoint agent:
  - `agents.md` -> `teacher/instructions/instructions.md`
- Struttura operativa:
  - memoria in `teacher/memory/`
  - prompt operativi in `teacher/prompt/` (backup note in `teacher/prompt/notes-backup.md`)
- Esercizi in root del repository con formato `<n>_<exerciseName>.asm`.
- Asset condivisi in `assets/` (`assets/sprites`, `assets/music`, `assets/charsets`).
- Build/run VS Code: output sempre in `${workspaceFolder}/bin`.
- README/environment: esplicitare che `.vscode/tasks.json` e' versionato e documentare il workflow build/run con keybind (Ctrl+Shift+B, mapping opzionale F7/F5).
- Nota operativa VS Code: i keybind della estensione KickAss possono bypassare i task; usare keybind mappati sui task workspace (incluso debugger).
- Preferenza esercizio 18: dati sprite embedded direttamente nel file (`18_spriteCollision.asm`) invece di asset binary esterni.
- Preferenza didattica esplicita: gli esercizi non vanno consegnati gia' risolti; fornire struttura + TODO + hint progressivi, lasciando allo studente la scrittura del codice.
- Regola formalizzata anche in `teacher/instructions/instructions.md` (sezione Exercises): default senza soluzione completa, avanzamento un TODO alla volta, soluzione completa solo su richiesta esplicita.
- Decisione tecnica per esercizio 18: movimento/input eseguiti nel raster IRQ (main loop inattivo), non in polling con wait frame.

## Regole tecniche da non perdere

- Nei file esercizio in root usare path relativi:
  - `lib/...`
  - `assets/...`
- `config.yaml` locale non versionato; `config-template.yaml` versionato.
- Campi richiesti in `config.yaml`: `argument`, `language`, `notes_backup_path`.

## Apprendimenti didattici consolidati

- Stable raster: per fascia ampia e stabile conviene catena IRQ `arm/top/bottom` (non un loop lungo nello stesso IRQ).
- Timing loop `DEX/BNE`: costo cicli `5*N - 1`.
- Formula utile per stimare delay su PAL: `X = (R*63 - P + 1) / 5` (`R`=righe, `P`=cicli gia' spesi, 63 cicli per scanline PAL).
- Limite pratico: con `X` a 8 bit non copri fasce molto alte; in quel caso servono IRQ multipli o doppio loop.
- Diagnosi visiva importante: se il cambio colore arriva tardi nella riga, l'effetto appare soprattutto a destra e puo' sembrare "instabile".
